<!DOCTYPE html>
<html>
	<head>
		Head
	</head>
	<script>
		// Create WebSocket connection.
		const socket = new WebSocket("ws://localhost:8080", ["echo-protocol"]);

		// Connection opened
		socket.addEventListener("open", event => {
			socket.send("Hello from map Client!");
		});

		// Listen for messages
		socket.addEventListener("message", event => {
			let message = "";
			if (event.data[0] == "{") message = JSON.parse(event.data);
			else message = event.data;

			console.log("Message from server ", message);

			switch (message.type) {
				case "replaceText": {
					document.body.textContent = message.data;
					break;
				}
				default: {
					return;
				}
			}
		});
	</script>
	<body>
		Maps!
	</body>
</html>
